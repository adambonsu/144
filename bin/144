#!/usr/bin/env ruby
# frozen_string_literal: true

$LOAD_PATH.unshift File.expand_path('../lib', __dir__)
require '144'

def answer
  gets.chomp
end

def clean(answer)
  Integer(answer).to_i
rescue StandardError
  nil
end

test = OneFourFour::Test.new(STDOUT)
test.start('indigo', %w[1x8 3x1 7x8])
test.questions.each_with_index do |_question, index|
  test.provide clean(answer), index
  STDOUT.puts
  STDOUT.print "#{test.questions[index + 1]}: " unless test.questions[index] == test.questions.last
end
STDOUT.print 'Result: '
STDOUT.print test.result.to_s
STDOUT.puts
